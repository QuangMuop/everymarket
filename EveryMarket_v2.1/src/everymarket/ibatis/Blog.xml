<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Blog">
	
	<typeAlias alias="Blog" type="everymarket.model.Blog"/>
 
 	<update id="updateBlog">
 		update blog
 		<dynamic prepend="set">
 			<iterate property="paramList" conjunction=",">
 				$paramList[]$ = #paramList[]#
 			</iterate>
 		</dynamic>
 		where m_id = #m_id#
 	</update>
 
 	<select id="getB_thumbByM_id" resultClass="String">
 		select b_thumb 
 		from blog 
 		where m_id = #m_id#
 	</select>
 	
 	<select id="getM_idByB_thumb" resultClass="String">
 		select m_id
 		from blog
 		where b_thumb = #b_thumb#
 	</select>
 
	<select id="getBlogByM_id" resultClass="Blog">
		select * 
		from blog 
		where m_id = #m_id#
	</select>
	
	<select id="getBlogByP_id" resultClass="Blog">
		select b.*
		from blog b join member m
		  on b.m_id = m.m_id
		  join product p
		  on p.m_id = m.m_id
		where p.p_id = #p_id#
	</select>
	
</sqlMap>